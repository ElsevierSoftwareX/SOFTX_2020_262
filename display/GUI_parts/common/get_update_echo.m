function update_echo=get_update_echo(echo_obj,echoType,lay_Unique_ID,lay_CID,fieldname,idx_r_disp,idx_p_disp,dr,dp)

update_echo=0;
if ~isempty(echo_obj.UserData.Layer_ID)&&~isempty(echo_obj.UserData.Idx_r)
   if ~(idx_r_disp(1)>=echo_obj.UserData.Idx_r(1)&&idx_r_disp(end)<=echo_obj.UserData.Idx_r(end))||...
            ~(idx_p_disp(1)>=echo_obj.UserData.Idx_pings(1)&&idx_p_disp(end)<=echo_obj.UserData.Idx_pings(end))||...
            dr~=round(nanmean(diff(echo_obj.UserData.Idx_r)))|| dp~=round(nanmean(diff(echo_obj.UserData.Idx_pings)))||...
            ~strcmpi(echo_obj.UserData.CID,lay_CID)||...
            ~strcmpi(echoType,echo_obj.Type)||...
            ~strcmpi(lay_Unique_ID,echo_obj.UserData.Layer_ID)||...
            ~strcmpi(fieldname,echo_obj.UserData.Fieldname)
        update_echo=1;
    end
else
    update_echo=1;
end